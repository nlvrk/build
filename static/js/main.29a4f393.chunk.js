(this["webpackJsonpchat-lite"]=this["webpackJsonpchat-lite"]||[]).push([[0],{123:function(e,a){},134:function(e,a,t){},136:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(16),c=t.n(o),l=t(20),s=t.n(l),i=t(33),m=t(13),u=t(35),d=t.n(u),p=t(67),E=t.n(p)()(),g=t(73),f=t(12),v=function(e,a){switch(a.type){case"JOINED":return Object(f.a)(Object(f.a)({},e),{},{joined:!0,userName:a.payload.userName,roomId:a.payload.roomId});case"SET_DATA":return Object(f.a)(Object(f.a)({},e),{},{users:a.payload.users,messages:a.payload.messages});case"SET_USERS":return Object(f.a)(Object(f.a)({},e),{},{users:a.payload});case"NEW_MESSAGE":return Object(f.a)(Object(f.a)({},e),{},{messages:[].concat(Object(g.a)(e.messages),[a.payload])});default:return e}},h=t(153);var b=function(e){var a=e.onLogin,t=r.a.useState(""),n=Object(m.a)(t,2),o=n[0],c=n[1],l=r.a.useState(""),u=Object(m.a)(l,2),p=u[0],E=u[1],g=r.a.useState(!1),f=Object(m.a)(g,2),v=f[0],b=f[1],y=function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&p){e.next=2;break}return e.abrupt("return",alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"));case 2:return t={roomId:o,userName:p},b(!0),e.next=6,d.a.post("/rooms",t);case 6:a(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"join-block"},r.a.createElement("input",{type:"text",placeholder:"\u0412\u0430\u0448\u0430 \u0413\u0440\u0443\u043f\u043f\u0430",value:o,onChange:function(e){return c(e.target.value)}}),r.a.createElement("input",{type:"text",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",value:p,onChange:function(e){return E(e.target.value)}}),r.a.createElement(h.a,{variant:"contained",color:"secondary",disabled:v,onClick:y,className:"btn btn-success"},v?"\u0412\u0425\u041e\u0414...":"\u0412\u041e\u0419\u0422\u0418"))};var y=function(e){var a=e.users,t=e.messages,n=e.userName,o=e.roomId,c=e.onAddMessage,l=r.a.useState(""),s=Object(m.a)(l,2),i=s[0],u=s[1],d=r.a.useRef(null);return r.a.useEffect((function(){d.current.scrollTo(0,99999)}),[t]),r.a.createElement("div",{className:"chat"},r.a.createElement("div",{className:"chat-users"},"\u0413\u0440\u0443\u043f\u043f\u0430: ",r.a.createElement("b",null,o),r.a.createElement("hr",null),r.a.createElement("b",null,"\u041e\u043d\u043b\u0430\u0439\u043d (",a.length,"):"),r.a.createElement("ul",null,a.map((function(e,a){return r.a.createElement("li",{key:e+a},e)})))),r.a.createElement("div",{className:"chat-messages"},r.a.createElement("div",{ref:d,className:"messages"},t.map((function(e){return r.a.createElement("div",{className:"message"},r.a.createElement("p",null,e.text),r.a.createElement("div",null,r.a.createElement("span",null,e.userName)))}))),r.a.createElement("form",null,r.a.createElement("textarea",{value:i,onChange:function(e){return u(e.target.value)},className:"form-control",rows:"3"}),r.a.createElement(h.a,{variant:"contained",color:"primary",onClick:function(){E.emit("ROOM:NEW_MESSAGE",{userName:n,roomId:o,text:i}),c({userName:n,text:i}),u("")},type:"button",className:"btn btn-primary"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))},N=t(156),O=t(157),x=t(158),S=t(159),j=t(160),w=t(137),k=t(161),R=t(155),T=t(72),I=t.n(T),A=Object(R.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(1)},title:{flexGrow:1},mainFeaturesPost:{position:"relative",color:e.palette.common.white,marginBottom:e.spacing(4),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",width:"100%",height:"550px"},mainFeaturesPostContent:{position:"relative",paddingTop:e.spacing(6),paddingRight:e.spacing(0),paddingLeft:e.spacing(1),paddingTBottom:e.spacing(2),marginTop:e.spacing(9)},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"rgba(0,0,0,.7)"},forma:{marginRight:"auto",marginLeft:"auto",align:"center",width:"100%",marginTop:"50px"},mainButtons:{}}}));var C=function(){var e=r.a.useReducer(v,{joined:!1,roomId:null,userName:null,users:[],messages:[]}),a=Object(m.a)(e,2),t=a[0],n=a[1],o=A(),c=function(){var e=Object(i.a)(s.a.mark((function e(a){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"JOINED",payload:a}),E.emit("ROOM:JOIN",a),e.next=4,d.a.get("/rooms/".concat(a.roomId));case 4:t=e.sent,r=t.data,n({type:"SET_DATA",payload:r});case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),l=function(e){n({type:"SET_USERS",payload:e})},u=function(e){n({type:"NEW_MESSAGE",payload:e})};return r.a.useEffect((function(){E.on("ROOM:SET_USERS",l),E.on("ROOM:NEW_MESSAGE",u)}),[]),window.socket=E,r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{position:"fixed"},r.a.createElement(O.a,{fixed:!0},r.a.createElement(x.a,null,r.a.createElement(S.a,{edge:"start",color:"inherit","aria-label":"menu",className:o.menuButton},r.a.createElement(I.a,null)),r.a.createElement(j.a,{variant:"h6",className:o.title},"\u0412\u044b\u043f\u0443\u0441\u043a\u043d\u0438\u043a\u0438")))),r.a.createElement("main",null,r.a.createElement(w.a,{className:o.mainFeaturesPost,style:{backgroundImage:"url(https://cdn.pixabay.com/photo/2017/02/07/10/33/crowd-2045499_1280.jpg)"}},r.a.createElement(O.a,{fixed:!0},r.a.createElement("div",{className:o.overlay}),r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0,md:6},r.a.createElement("div",{className:o.mainFeaturesPostContent},r.a.createElement(j.a,{component:"h1",variant:"h3",color:"inherit",gutterBottom:!0},"\u0412\u0435\u0431-\u0447\u0430\u0442 \u0434\u043b\u044f \u0432\u044b\u043f\u0443\u0441\u043a\u043d\u0438\u043a\u043e\u0432"),r.a.createElement(j.a,{variant:"h5",color:"inherit",paragraph:!0},"\u0412 \u044d\u0442\u043e\u043c \u0447\u0430\u0442\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043e\u0431\u0449\u0430\u0442\u044c\u0441\u044f \u0441\u043e \u0441\u0432\u043e\u0438\u043c\u0438 \u043e\u0434\u043d\u043e\u0433\u0440\u0443\u043f\u043f\u043d\u0438\u043a\u0430\u043c\u0438. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043d\u0443\u0436\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0432\u044b \u0443\u0447\u0438\u043b\u0438\u0441\u044c"),r.a.createElement(h.a,{variant:"contained",color:"secondary",href:"#bot"},"\u041a \u0447\u0430\u0442\u0443")))))),r.a.createElement("div",{className:o.mainContent},r.a.createElement(O.a,{maxWidth:"sm"},r.a.createElement(k.a,{Container:!0},r.a.createElement(k.a,{item:!0,md:12},r.a.createElement(j.a,{variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u044c \u041e\u043c\u0413\u0422\u0423!"),r.a.createElement(j.a,{variant:"h5",align:"center",color:"textSecondary",gutterBottom:!0},"\u0417\u0434\u0435\u0441\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u0432\u043e\u0451 \u043f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435"),r.a.createElement("form",{className:o.forma,noValidate:!0,autoComplete:"off"},r.a.createElement("textarea",{style:{width:"100%"}}),r.a.createElement(k.a,{item:!0},r.a.createElement(h.a,{variant:"contained",color:"secondary",type:"submit",style:{marginLeft:"40%"}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))),r.a.createElement(j.a,{style:{marginTop:"150px"},variant:"h2",align:"center",color:"textPrimary"},"\u0412\u0435\u0431-\u0447\u0430\u0442")))))),r.a.createElement("div",{className:"wrapper"},t.joined?r.a.createElement(y,Object.assign({},t,{onAddMessage:u})):r.a.createElement(b,{onLogin:c})),r.a.createElement("footer",null,r.a.createElement("a",{id:"bot"}),r.a.createElement(j.a,{align:"center",color:"textSecondary",component:"p",variaant:"subtitle",gutterBottom:!0},"\xa9 2021 All Right Reserved")))};t(134);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root"))},79:function(e,a,t){e.exports=t(136)}},[[79,1,2]]]);
//# sourceMappingURL=main.29a4f393.chunk.js.map